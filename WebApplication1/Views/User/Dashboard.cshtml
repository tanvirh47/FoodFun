@model IEnumerable<WebApplication1.Models.Order>

@{
    ViewBag.Title = "User Dashboard";
    Layout = "~/Views/_LayoutPage2.cshtml";
} 

<!-- Banner Area Starts -->
<section class="banner-area banner-area2 menu-bg text-center">
    <div class="container">
        <div class="row">  
            <div class="col-lg-12">
                <h1><i>Previous Orders</i></h1>
                <p class="pt-2"><i>Becxast kind form divide night above let moveth bearing darkness.</i></p>
            </div>
        </div>
    </div>
</section>
<section class="dashboard-area section-padding">
    <div class="container">
        <h2>Your Order History</h2>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Order ID</th>
                    <th>Order Date</th>
                    <th>Total Price</th>
                    <th>Items</th>  <!-- New column to display food item names -->
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var order in Model)
                {
                    <tr>
                        <td>@order.OrderId</td>
                        <td>@(order.OrderDate.HasValue ? order.OrderDate.Value.ToString("g") : "No Date")</td>
                        <td>@(order.TotalPrice.HasValue ? order.TotalPrice.Value.ToString("C") : "No Price")</td>
                        <td>
                            @if (order.OrderItems != null && order.OrderItems.Any())
                            {
                                foreach (var item in order.OrderItems)
                                {
                                    <span>@item.FoodItem.Name</span><br /> <!-- Display each food item name -->
                                }
                            }
                            else
                            {
                                <span>No items</span> <!-- Handle case when there are no items -->
                            }
                        </td>
                        <td>Completed</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</section>
